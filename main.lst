MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00002 ;*                              PWM                                                            *
                      00003 ;*       UTFPR - CAMPUS TOLEDO   |    ENGENHARIA ELETRÔNICA        *
                      00004 ;*                                                                       JEFFERSON GUND            *
                      00005 ;*   VERSÃO: 1.0                           DATA: 20/01/2014        *
                      00006 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00007 ;*                     DESCRIÇÃO DO ARQUIVO                        *
                      00008 ;*-----------------------------------------------------------------*
                      00009 ;* CÓDIGO PARA PIC 16F877 DA DISCIPLINA "MICROCONTROLADORES".      *
                      00010 
                      00011 ;ESTE CÓDIGO FAZ O USO DO CONVERSOR A/D PARA LEITURA DE TENSÃO EM UM
                      00012 ;POTÊNCIÔMETRO LINEAR E COM ESTA ENTRADA ANALÓGICA, CONTROLA O PULSO 
                      00013 ;PWM QUE ACIONA UMA LÂMPADA. O CONVERSOR ESTÁ CONFIGURADO PARA JUSTIFICAR
                      00014 ;À DIREITA OS BITS AMOSTRADOS.
                      00015 
                      00016 
                      00017 ;_CP_OFF        ==> MEMÓRIA DE PROGRAMA DESPROTEGIDA CONTRA LEITURA.
                      00018 ;_WRT_OFF       ==> SEM PERMISSÃO PARA ESCREVER NA MEMÓRIA DE PROGRAMA 
                      00019 ;                               DURANTE EXECUÇÃO DO PROGRAMA.
                      00020 ;_DEBUG_ON      ==> DEBUG ATIVADO.
                      00021 ;_CPD_OFF       ==> MEMÓRIA EEPROM PROTEGIDA CONTRA LEITURA.
                      00022 ;_LVP_OFF       ==> PROGRAMAÇÃO EM BAIXA TENSÃO DESABILITADA.
                      00023 ;_WDT_OFF       ==> WDT DESATIVADO.
                      00024 ;_BODEN_OFF     ==> BROWN-OUT DESATIVADO. 
                      00025 ;_PWRTE_ON      ==> POWER-ON RESET ATIVADO.
                      00026 ;_XT_OSC        ==> OSCILADOR CRISTAL (4MHz).
                      00027 
                      00028 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00029 ;*                     ARQUIVOS DE DEFINIÇÕES                      *
                      00030 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00031 #INCLUDE <P16F877.INC>  
                      00001         LIST
                      00002 ; P16F877.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00373         LIST
                      00032 
                      00033 
                      00034 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00035 ;*                CONFIGURAÇÃO PARA GRAVAÇÃO (FUSES)                   *
                      00036 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00037 
Warning[205]: Found directive in column 1. (__CONFIG)
2007   3731           00038 __CONFIG _WDT_OFF & _LVP_OFF & _BODEN_OFF & _XT_OSC & _CP_OFF & _PWRTE_ON & _CPD_OFF & _DEBUG_ON
                      00039 
                      00040 ;__CONFIG _WDT_OFF & _XT_OSC & _LVP_OFF & _DEBUG_ON & _BODEN_OFF
                      00041 
                      00042 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00043 ;*                    PAGINAÇÃO DE MEMÓRIA                         *
                      00044 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00045 ; DEFINIÇÃO DE COMANDOS DE USUÁRIO PARA ALTERAÇÃO DA PÁGINA DE
                      00046 ; MEMÓRIA.
                      00047 
                      00048 BANK0   MACRO                                   ;SELECIONA BANK0 DE MEMÓRIA.
                      00049                                 bcf STATUS,RP1
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00050                                 bcf     STATUS,RP0
                      00051                 ENDM                                    ;FIM DA MACRO BANK0.
                      00052 
                      00053 BANK1   MACRO                                   ;SELECIONA BANK1 DE MEMÓRIA.
                      00054                                 bcf STATUS,RP1
                      00055                                 bsf     STATUS,RP0
                      00056                 ENDM                                    ;FIM DA MACRO BANK1.
                      00057 
                      00058 
                      00059 
                      00060 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00061 ;*                         VARIÁVEIS                               *
                      00062 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00063 ; DEFINIÇÃO DOS NOMES E ENDEREÇOS DE TODAS AS VARIÁVEIS UTILIZADAS 
                      00064 ; PELO SISTEMA
                      00065         CBLOCK  0x20    ;ENDEREÇO INICIAL DA MEMÓRIA DE
                      00066                                         ;USUÁRIO.
                      00067 
                      00068 ;REGISTRADORES TEMPORÁRIOS PARA USO JUNTO ÀS INTERRUPÇÕES
  00000020            00069         W_TEMP          
  00000021            00070         STATUS_TEMP             
                      00071 
                      00072 ;REGISTRADORES AUXILIARES PARA ROTINA DE DELAY E ESCRITA NO DISPLAY LCD
  00000022            00073         TEMPO1
  00000023            00074         TEMPO2
  00000024            00075         DELAY0
  00000025            00076         DELAY1
  00000026            00077         DELAY2
  00000027            00078         NIBLE
  00000028            00079         COUNT1
                      00080 
                      00081 ;REGISTRADORES AUXILIARES PARA ROTINA DE DIVISÃO
  00000029            00082         QUOCIENTE_H
  0000002A            00083         QUOCIENTE_L
  0000002B            00084         DIVIDENDO_L
  0000002C            00085         DIVIDENDO_H
  0000002D            00086         RESTOTMP_L
  0000002E            00087         RESTOTMP_H
  0000002F            00088         DIVISOR_H
  00000030            00089         DIVISOR_L
  00000031            00090         RESTO_L
  00000032            00091         RESTO_H
                      00092 
                      00093 ;REGISTRADORES AUXILIARES PARA ROTINA DE MULTIPLICAÇÃO
  00000033            00094         MULT_2
  00000034            00095         MULT_TEMP
  00000035            00096         PRODUTO_H
  00000036            00097         PRODUTO_L
  00000037            00098         MULT1_H
  00000038            00099         MULT1_L
                      00100         
                      00101 ;REGISTRADORES AUXILIARES PARA A ROTINA DO CONVERSOR AD
  00000039            00102         UNIDADE
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000003A            00103         DEZENA
  0000003B            00104         CENTENA
  0000003C            00105         MILHAR
  0000003D            00106         MILHAO
                      00107 
                      00108 ;REGISTRADORES AUXILIARES PARA A ROTINA DE LEITURA DO TECLADO MATRICIAL
  0000003E            00109         AUX
  0000003F            00110         FLAGS
  00000040            00111         LINHA
  00000041            00112         LINHA_
  00000042            00113         NUM
  00000043            00114         COLUNA
  00000044            00115         COLUNA_
  00000045            00116         CARACTER
                      00117 ;REGISTRADORES AUXILIARES PARA O MAIN
  00000046            00118         CONFIRMA
  00000047            00119         OPCAO_INSERIDA
  00000048            00120         ETAPA_CONFIG    ;INDICA EM QUE PONTO DA CONFIGURAÇÃO
                      00121                                                 ;O MICROCONTROLADOR ESTÁ.
                      00122 ;REGISTRADORES AUXILIARES PARA LEITURA/ESCRITA NA EEPROM
  00000049            00123 ENDERECO
  0000004A            00124 DADO
                      00125 
Warning[205]: Found directive in column 1. (ENDC)
                      00126 ENDC                    ;FIM DO BLOCO DE MEMÓRIA.
                      00127 
                      00128 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00129 ;*                         CONSTANTES                              *
                      00130 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00131 ; DEFINIÇÃO DE TODAS AS CONSTANTES UTILIZADAS PELO SISTEMA
                      00132 
                      00133 
                      00134 ;DEFINIÇÕES DO LCD
                      00135 
                      00136 #DEFINE         ENABLE          PORTE,1
                      00137 #DEFINE         RS                      PORTE,0
                      00138 #DEFINE         RW                      PORTE,2
                      00139 #DEFINE         DISPLAY         PORTD
                      00140 
                      00141 
                      00142 ;CONSTANTES UTILIZADAS PELO SISTEMA.
                      00143 
                      00144 #DEFINE         T240                    .100
                      00145 #DEFINE         T6                              .3
                      00146 ;CONSTANTE UTILIZADA PELA ROTINA DE LEITURA DO TECLADO MATRICIAL
  0000007D            00147 TEMPO_DELAY     EQU     .125
                      00148 
                      00149 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00150 ;*                       VETOR DE RESET                            *
                      00151 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00152 
0000                  00153         ORG     0x00            ;ENDEREÇO INICIAL DE PROCESSAMENTO.
0000   280C           00154         goto    INICIO
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00155         
                      00156 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00157 ;*                    INÍCIO DA INTERRUPÇÃO                        *
                      00158 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00159 ; ENDEREÇO DE DESVIO DAS INTERRUPÇÕES. A PRIMEIRA TAREFA É SALVAR OS
                      00160 ; VALORES DE "W" E "STATUS" PARA RECUPERAÇÃO FUTURA
                      00161 
                      00162 ;AS INTERRUPÇÕES NÃO SERÃO UTILIZADAS.
                      00163 
0004                  00164         ORG             0x04                            ;ENDEREÇO INICIAL DA INTERRUPÇÃO.
0004   00A0           00165         movwf   W_TEMP                          ;COPIA W PARA W_TEMP.
0005   0E03           00166         swapf   STATUS,W
0006   00A1           00167         movwf   STATUS_TEMP                     ;COPIA STATUS PARA STATUS_TEMP.
                      00168 
                      00169 
                      00170 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00171 ;*                 ROTINA DE SAÍDA DA INTERRUPÇÃO                  *
                      00172 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00173 ; OS VALORES DE "W" E "STATUS" DEVEM SER RECUPERADOS ANTES DE 
                      00174 ; RETORNAR DA INTERRUPÇÃO
                      00175 
0007                  00176 SAI_INT
0007   0E21           00177         swapf   STATUS_TEMP,W
0008   0083           00178         movwf   STATUS          ;MOVE STATUS_TEMP PARA STATUS.
0009   0EA0           00179         swapf   W_TEMP,F
000A   0E20           00180         swapf   W_TEMP,W        ;MOVE W_TEMP PARA W.
                      00181 
000B   0009           00182         retfie
                      00183 
                      00184 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00185 ;*                  CONFIGURAÇÃO DO MICROCONTROLADOR               *
                      00186 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00187         
000C                  00188 INICIO
                      00189         
                      00190         BANK1   ;ALTERA P/ BANCO1
000C   1303               M                                 bcf STATUS,RP1
000D   1683               M                                 bsf     STATUS,RP0
000E   3008           00191         MOVLW   B'00001000'     ;DEFINE RA3 COMO ENTRADA E DEMAIS PINOS COMO SAIDA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000F   0085           00192         MOVWF   TRISA
0010   300F           00193         movlw   B'00001111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0011   0086           00194         movwf   TRISB           ;RB0 E RB1 SÃO ENTRADAS.
0012   30F0           00195         movlw   B'11110000' ;RC0 E RC1 SÃO TERRA DO TECLADO.
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0013   0087           00196         movwf   TRISC           
0014   3000           00197         MOVLW   B'00000000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0015   0088           00198         MOVWF   TRISD
0016   3000           00199         MOVLW   B'00000000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0017   0089           00200         MOVWF   TRISE
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00201 ;       MOVLW   B'10000111' 
                      00202 ;       MOVWF   OPTION_REG      ;PRESCALER 1:32 NO TMR0
                      00203         
0018   3000           00204         MOVLW   B'00000000' ;CHAVE GERAL DE INTERRUPÇÃO DESLIGADA.
0019   008B           00205         MOVWF   INTCON          ;DEMAIS BITS IRRELEVANTES
001A   305F           00206         movlw   B'01011111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001B   0081           00207         movwf   OPTION_REG      ;DEFINE OPÇÕES DE OPERAÇÃO.
                      00208                                                 ;PULL-UPS HABILITADOS </RBPU>.
                      00209                                                 ;INT. NA BORDA DE SUBIDA EM RB0 <INTEDG>.
                      00210                                                 ;TIMER0 INCR. PELO CICLO DE MÁQUINA <TOCS>.
                      00211                                                 ;PRESCALER APLICADO AO WDT <PSA>.
                      00212                                                 ;WDT 1:128, TMR0 1:1 <PS2:PS0>.
                      00213 
                      00214 ;       MOVLW   B'00001001'
                      00215 ;       MOVWF   ADCON1          ;DEFINE A3 COMO ENTRADA ANALÓGICA.
                      00216 
001C   3007           00217         movlw   B'00000111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001D   009F           00218         movwf   ADCON1          ;CONFIGURA CONVERSOR A/D.
                      00219                                                 ;CONFIGURA PORTA E PORTE COMO I/O DIGITAL.
                      00220 
                      00221         BANK0
001E   1303               M                                 bcf STATUS,RP1
001F   1283               M                                 bcf     STATUS,RP0
                      00222 
                      00223 
                      00224 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00225 ;*                      INICIALIZAÇÃO DA RAM                       *
                      00226 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00227 
                      00228 ;  LIMPEZA DE TODA A RAM DO BANC0 0, INDO DE 0X20 A 0X7F.
                      00229 
0020   3020           00230         movlw   0x20
0021   0084           00231         movwf   FSR                             ;APONTA O ENDEREÇAMENTO INDIRETO PARA
                      00232                                                         ;A PRIMEIRA POSIÇÃO DA RAM.
0022                  00233 LIMPA_RAM
0022   0180           00234         clrf    INDF                    ;LIMPA A POSIÇÃO ATUAL.
0023   0A84           00235         incf    FSR,F                   ;INCREMENTA PONTEIRO P/ A PRÓX. POS.
0024   0804           00236         movf    FSR,W
0025   3A80           00237         xorlw   0x80                    ;COMPARA PONTEIRO COM A ÚLT. POS. +1.
0026   1D03           00238         btfss   STATUS,Z                ;JÁ LIMPOU TODAS AS POSIÇÕES?
0027   2822           00239         goto    LIMPA_RAM               ;NÃO, LIMPA A PRÓXIMA POSIÇÃO.
                      00240                                                         ;SIM, CONTINUA O PROGRAMA.
                      00241                                                         
                      00242 ;*******************************************************************
                      00243 ;                                       INICIALIZAÇÃO DAS VARIÁVEIS                                     
                               *
                      00244 ;*******************************************************************
                      00245 
0028   0185           00246         CLRF    PORTA   ;LIMPA PORTA
0029   0186           00247         CLRF    PORTB   ;LIMPA PORTB
002A   0187           00248         CLRF    PORTC   ;LIMPA PORTC
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

002B   0188           00249         CLRF    PORTD   ;LIMPA PORTD
002C   0189           00250         CLRF    PORTE   ;LIMPA PORTE
                      00251 
                      00252 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00253 ;*                     INICIALIZAÇÃO DO DISPLAY                    *
                      00254 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00255 
002D                  00256 INICIALIZACAO_DISPLAY:
                      00257 
                      00258 ;ENABLE = PORTE,1 . RS = PORTE,0 . RW = PORTE,2 .       
                      00259 
002D   304B           00260         MOVLW   .75
002E   23CD           00261         CALL    DELAY_2         ; DELAY DE 15mS
                      00262 
002F   1089           00263         BCF             ENABLE           
0030   1009           00264         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDOS
0031   1109           00265         BCF     RW
                      00266         
0032   3014           00267         MOVLW   .20
0033   23CD           00268         CALL    DELAY_2         ; DELAY DE 3mS
0034   3030           00269         MOVLW   B'00110000'             ;INICIALIZA O DISPLAY.
0035   2083           00270         CALL    ESCREVE_ni
                      00271 
0036   3014           00272         MOVLW   .20
0037   23CD           00273         CALL    DELAY_2         ; DELAY DE ~4mS
0038   3030           00274         MOVLW   B'00110000'             ;INICIALIZA O DISPLAY.
0039   2083           00275         CALL    ESCREVE_ni
                      00276 
003A   3014           00277         MOVLW   .20
003B   23CD           00278         CALL    DELAY_2         ; DELAY DE 3mS
003C   3030           00279         MOVLW   B'00110000'             ;INICIALIZA O DISPLAY.
003D   2083           00280         CALL    ESCREVE_ni
                      00281 
003E   3014           00282         MOVLW   .20
003F   23CD           00283         CALL    DELAY_2 ; DELAY DE 3mS
0040   3020           00284         MOVLW   B'00100000'             ;COMANDO PARA INTERFACE DE 4 BITS.
0041   2083           00285         CALL    ESCREVE_ni
                      00286 
0042   3014           00287         MOVLW   .20
0043   23CD           00288         CALL    DELAY_2         ; DELAY DE 3mS
0044   3028           00289         MOVLW   B'00101000'             ;COMANDO PARA INTERFACE DE 4 BITS.
0045   2070           00290         CALL    ESCREVE
                      00291 
0046   3014           00292         MOVLW   .20
0047   23CD           00293         CALL    DELAY_2 ; DELAY DE 3mS
0048   300F           00294         MOVLW   B'00001111'     ; ESCREVE COMANDO PARA LIGAR O DISPLAY E ATIVAR O CURSOR PISCANDO.
0049   2070           00295         CALL    ESCREVE                 ; 
                      00296 
004A   3014           00297         MOVLW   .20
004B   23CD           00298         CALL    DELAY_2         ; DELAY DE 3mS
004C   3006           00299         MOVLW   B'00000110'     ; ESCREVE COMANDO PARA LIGAR O DISPLAY E ATIVAR O CURSOR PISCANDO.
004D   2070           00300         CALL    ESCREVE                 ; 
                      00301 
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

004E   3014           00302         MOVLW   .20
004F   23CD           00303         CALL    DELAY_2         ; DELAY DE 3mS
0050   3001           00304         MOVLW   B'00000001'     ; ESCREVE COMANDO PARA
0051   2070           00305         CALL    ESCREVE                 ; LIMPAR TODO O DISPLAY
                      00306         
0052   3014           00307         MOVLW   .20
0053   23CD           00308         CALL    DELAY_2 ; DELAY DE 3mS
0054   300E           00309         MOVLW   B'00001110'     ; ESCREVE COMANDO PARA DESATIVAR CURSOR PISCANTE.
0055   2070           00310         CALL    ESCREVE
                      00311 
                      00312 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00313 ;*                     INICIALIZA PWM                                      *
                      00314 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00315 
                      00316 
                      00317 
                      00318 
                      00319 
                      00320         
                      00321 ;ESTA ROTINA CONFIGURA E ATIVA O CONVERSOR A/D 
                      00322 
                      00323         
                      00324 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00325 ;*                     INICIALIZA CONVERSOR                                *
                      00326 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00327 
                      00328 ;ATIVA_CONVERSOR_AD
                      00329 
                      00330 ;       MOVLW   B'10010000' ;CHAVE GERAL DE INTERRUPÇÃO E TIMER0 LIGADO.
                      00331 ;       MOVWF   INTCON          
                      00332 
                      00333         ;BANK1  
                      00334 ;       MOVLW   B'10000100' ;JUSTIFICADO À DIREITA.
                      00335 ;       MOVWF   ADCON1
                      00336         
                      00337 
                      00338 ;       BANK0
                      00339 ;       MOVLW   B'10011001' 
                      00340 ;       MOVWF   ADCON0  ;FREQ OSC/32 
                      00341                                         ;CANAL 0 SELECIONADO <A0>
                      00342                                         ;MODULO A/D LIGADO <0>
                      00343 ;       GOTO    MAIN
                      00344 
                      00345 
                      00346 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00347 ;*                              MAIN                                       *
                      00348 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00349 ;ROTINA PRINCIPAL DO PROGRAMA 
                      00350 
                      00351 
                      00352 
0056                  00353 MAIN
0056   01C9           00354         CLRF    ENDERECO
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00355 
0057                  00356 ETAPA1
                      00357 
0057   20D0           00358         CALL    NIVEL_SABAO             ;ESCREVE "NÍVEL DE SABÃO:"
0058   3001           00359         MOVLW   .1
0059   00C8           00360         MOVWF   ETAPA_CONFIG    
005A   2ACC           00361         GOTO    LEITURA 
                      00362 
005B                  00363 ETAPA2
                      00364 
005B   20F7           00365         CALL    NIVEL_AGUA              ;ESCREVE AS OPÇÕES DE LAVAGEM DA MÁQUINA.       
005C   3002           00366         MOVLW   .2
005D   00C8           00367         MOVWF   ETAPA_CONFIG
005E   2ACC           00368         GOTO    LEITURA
                      00369 
005F                  00370 ETAPA3
                      00371 
005F   2120           00372         CALL    NIVEL_AMACIANTE                 ;ESCREVE AS OPÇÕES DE LAVAGEM DA MÁQUINA.
0060   3003           00373         MOVLW   .3
0061   00C8           00374         MOVWF   ETAPA_CONFIG
0062   2ACC           00375         GOTO    LEITURA
                      00376 
                      00377 
0063                  00378 ETAPA4
                      00379 
0063   2149           00380         CALL    TIPO_ROUPA              ;ESCREVE AS OPÇÕES DE LAVAGEM DA MÁQUINA.
0064   3004           00381         MOVLW   .4
0065   00C8           00382         MOVWF   ETAPA_CONFIG
0066   2ACC           00383         GOTO    LEITURA
                      00384 
0067                  00385 ETAPA5
                      00386 
0067   3005           00387         MOVLW   .5
0068   00C8           00388         MOVWF   ETAPA_CONFIG
0069   3000           00389         MOVLW   .0
006A   00C7           00390         MOVWF   OPCAO_INSERIDA
006B   2172           00391         CALL    TIPO_SUJEIRA            ;->POUCO SUJA->SUJA->MUITO SUJA->
006C   2ACC           00392         GOTO    LEITURA
006D                  00393 ETAPA6
006D   3006           00394         MOVLW   .6
006E   00C8           00395         MOVWF   ETAPA_CONFIG
                      00396         
                      00397         ;CALL   LEITURA_SENSOR_NIVEL            ;INICIACONVERSÃO AD E OBTEM OS VALORES PARA CENTENAS, DE
                            ZENAS, UNIDADES, ETC..
                      00398 
                      00399 
                      00400 ;       CALL    LAVAGEM                         ;EXECUTA A LAVAGEM, DE ACORDO COM AS OPÇÕES INSERIDAS.
                      00401 
                      00402 ;       CALL    GERA_MENSAGEM   ;ARMAZENA NA MEMORIA RAM (POSIÇÕES 0X20 A 0X40) "Van = 'VALOR' V"
                      00403 ;       CALL    ATUALIZA_LCD    ;ESCREVE A SEGUNDA PARTE DA MENSAGEM NO DISPLAY: "Van = 'VALOR' V"
                      00404 
Warning[203]: Found opcode in column 1. (GOTO)
006F   2856           00405 GOTO    MAIN
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00406 
                      00407 
                      00408 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00409 ;*                       INCLUDES                                          *
                      00410 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00411 
                      00412 
                      00413 #INCLUDE        "LCD_4BITS_JG.INC"
                      00001 
0070                  00002 ESCREVE:        ;ENVIA INSTRUÇÃO PARA O LCD.
                      00003 
                      00004 
0070   00A7           00005         MOVWF   NIBLE
0071   39F0           00006         ANDLW   B'11110000'
0072   0088           00007         MOVWF    DISPLAY
                      00008 
0073   0000           00009         NOP                                     ; PERDE TEMPO PARA ESTABILIZAÇÃO
0074   1489           00010         BSF             ENABLE          ; ENVIA UM PULSO DE ENABLE AO DISPLAY
0075   0000           00011         NOP
0076   300A           00012         MOVLW   .10
0077   23CD           00013         CALL    DELAY_2         ; DELAY DE 1mS
0078   1089           00014         BCF     ENABLE 
                      00015         
0079   0E27           00016         SWAPF   NIBLE, W ; INVERTE O NIBLE PARA ENVIO.
007A   39F0           00017         ANDLW   B'11110000'
007B   0088           00018         MOVWF   DISPLAY ;
                      00019         
007C   0000           00020         NOP                                     ; PERDE TEMPO PARA ESTABILIZAÇÃO
007D   1489           00021         BSF             ENABLE          ; ENVIA UM PULSO DE ENABLE AO DISPLAY
007E   287F           00022         GOTO    $+1             ;.
007F   300A           00023         MOVLW   .10
0080   23CD           00024         CALL    DELAY_2         ; DELAY DE 1mS
0081   1089           00025         BCF     ENABLE 
                      00026 
                      00027 
Warning[203]: Found opcode in column 1. (RETURN)
0082   0008           00028 RETURN ;
                      00029 
                      00030 ;**************************************8
0083                  00031 ESCREVE_ni:     ;ENVIA INSTRUÇÃO PARA O LCD.
                      00032 
0083   39F0           00033         ANDLW   B'11110000'
0084   0088           00034         MOVWF    DISPLAY
                      00035 
0085   0000           00036         NOP                                     ; PERDE TEMPO PARA ESTABILIZAÇÃO
0086   1489           00037         BSF             ENABLE          ; ENVIA UM PULSO DE ENABLE AO DISPLAY
0087   0000           00038         NOP
0088   300A           00039         MOVLW   .10
0089   23CD           00040         CALL    DELAY_2         ; DELAY DE 1mS
008A   1089           00041         BCF     ENABLE 
                      00042         
Warning[203]: Found opcode in column 1. (RETURN)
008B   0008           00043 RETURN ;
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00414 #INCLUDE        "MULTI_10X8.INC"
                      00001 ;*****************************************************************************
                      00002 ; MULT_10x8.INC
                      00003 ; ROTINAS DE MULTIPLICAÇÃO 10x8
                      00004 ;*****************************************************************************
                      00005 
008C                  00006 MULTI_10x8
                      00007 
008C   01B5           00008         clrf    PRODUTO_H
008D   01B6           00009         clrf    PRODUTO_L
008E   0833           00010         movf    MULT_2,W
008F   00B4           00011         movwf   MULT_TEMP
                      00012         
0090                  00013 TESTA_MULT_1
                      00014 
0090   18B7           00015         btfsc   MULT1_H,1
0091   2898           00016         goto    TESTA_MULT_2
0092   1837           00017         btfsc   MULT1_H,0
0093   2898           00018         goto    TESTA_MULT_2
0094   0838           00019         movf    MULT1_L,W
0095   3A00           00020         xorlw   0x00
0096   1903           00021         btfsc   STATUS,Z
0097   0008           00022         return
                      00023 
0098                  00024 TESTA_MULT_2
                      00025 
0098   0833           00026         movf    MULT_2,W
0099   3A00           00027         xorlw   0x00
009A   1903           00028         btfsc   STATUS,Z
009B   0008           00029         return
                      00030 
009C                  00031 MULTIPLICA
                      00032 
009C   0838           00033         movf    MULT1_L,W
009D   07B6           00034         addwf   PRODUTO_L,F
009E   1803           00035         btfsc   STATUS,C
009F   0AB5           00036         incf    PRODUTO_H,F
00A0   0837           00037         movf    MULT1_H,W
00A1   07B5           00038         addwf   PRODUTO_H,F
00A2   0BB4           00039         decfsz  MULT_TEMP,F
00A3   289C           00040         goto    MULTIPLICA
00A4   0008           00041         return
                      00415 #INCLUDE        "div_16X16.INC"
                      00001 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00002 ;*                      DIV_16x16B.INC                                     *
                      00003 ;*                           UTFPR                                 *
                      00004 ;*         DESENVOLVIDO POR PAULO DE TARSO NEVES JUNIOR                *
                      00005 ;*   VERSÃO: 1.0                           DATA: 22/04/2012        *
                      00006 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00007 ;*                     DESCRIÇÃO DO ARQUIVO                        *
                      00008 ;*-----------------------------------------------------------------*
                      00009 ;*      ARQUIVO INCLUDE PARA DIVISÃO DE DOIS NÚMEROS DE 16 BITS EM         * 
                      00010 ;*  QUATRO REGISTRADORES (DIVIDENDO_H, DIVIDENDO_L, DIVISOR_H E    *
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00011 ;*      DIVISOR_L) PASSADOS PELO PROGRAMA PRINCIPAL.                               *
                      00012 ;*      O RESULTADO SERÁ ARMAZENADO EM DIVIDENDO_H E DIVIDENDO_L.          *
                      00013 ;*      O RESTO SERÁ ARMAZENADO EM RESTO_H E RESTO_L.                              *
                      00014 ;*                                                                                                      
                                                       *
                      00015 ;*-----------------------------------------------------------------*
                      00016 ;* ROTINAS A SEREM CHAMADAS PELO PROGRAMA PRINCIPAL:                   *
                      00017 ;*                                                                                                      
                                                       *
                      00018 ;*      DIVIDE_16x16 - Divide o conteúdo de DIVIDENDO_H:DIVIDENDO_L e  *
                      00019 ;*                                      DIVISOR_H:DIVISOR_L                                             
                                       *
                      00020 ;*                                                                                                      
                                                       *
                      00021 ;*-----------------------------------------------------------------*
                      00022 ;* REGISTRADORES A SEREM DECLARADOS NO PROGRAMA PRINCIPAL:                 *
                      00023 ;*      NUM_1           - Multiplicando.                                                                
                               *
                      00024 ;*      NUM_2           - Multiplicador.                                                                
                               *
                      00025 ;*      PRODUTO_L       - Byte baixo do resultado.                                                 *
                      00026 ;*      PRODUTO_H       - Byte alto do resultado.                                                  *
                      00027 ;*                                                                                                      
                                                       *
                      00028 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00029 
00A5                  00030 DIVIDE_16x16
00A5   01A9           00031         clrf    QUOCIENTE_H
00A6   01AA           00032         clrf    QUOCIENTE_L
00A7   082B           00033         movf    DIVIDENDO_L,W
00A8   00AD           00034         movwf   RESTOTMP_L
00A9   082C           00035         movf    DIVIDENDO_H,W
00AA   00AE           00036         movwf   RESTOTMP_H
                      00037 
00AB                  00038 TESTA_DIVIDENDO
00AB   0830           00039         movf    DIVISOR_L,W
00AC   022D           00040         subwf   RESTOTMP_L,W
00AD   3001           00041         movlw   0x01
00AE   1C03           00042         btfss   STATUS,C
00AF   022E           00043         subwf   RESTOTMP_H,W
00B0   1C03           00044         btfss   STATUS,C
00B1   28B6           00045         goto    DIV
00B2   082B           00046         movf    DIVIDENDO_L,W
00B3   00B1           00047         movwf   RESTO_L
00B4   082C           00048         movf    DIVIDENDO_H,W
00B5   00B2           00049         movwf   RESTO_H 
                      00050 
00B6                  00051 DIV     
00B6   20C2           00052         call    SUBTRAI_16x16
00B7   3001           00053         movlw   0x01
00B8   1C03           00054         btfss   STATUS,C
00B9   0008           00055         return
00BA   07AA           00056         addwf   QUOCIENTE_L,F
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00BB   1803           00057         btfsc   STATUS,C
00BC   0AA9           00058         incf    QUOCIENTE_H,F
00BD   082D           00059         movf    RESTOTMP_L,W
00BE   00B1           00060         movwf   RESTO_L
00BF   082E           00061         movf    RESTOTMP_H,W
00C0   00B2           00062         movwf   RESTO_H
00C1   28B6           00063         goto    DIV
                      00064         
00C2                  00065 SUBTRAI_16x16
00C2   0830           00066         movf    DIVISOR_L,W
00C3   02AD           00067         subwf   RESTOTMP_L,F
00C4   3001           00068         movlw   0x01
00C5   1C03           00069         btfss   STATUS,C
00C6   02AE           00070         subwf   RESTOTMP_H,F
00C7   1C03           00071         btfss   STATUS,C
00C8   28CC           00072         goto    EMPRESTA
00C9   082F           00073         movf    DIVISOR_H,W
00CA   02AE           00074         subwf   RESTOTMP_H,F
00CB   0008           00075         return
                      00076 
00CC                  00077 EMPRESTA
00CC   082F           00078         movf    DIVISOR_H,W
00CD   02AE           00079         subwf   RESTOTMP_H,F
00CE   1003           00080         bcf             STATUS,C
00CF   0008           00081         return
                      00416 #INCLUDE        "INICIALIZACAO.INC"
                      00001 ;********************************************************************
00D0                  00002 NIVEL_SABAO
00D0   1009           00003         BCF             RS              ; SELECIONA O DISPLAY P/ COMANDOS
00D1   3080           00004         MOVLW   0X80            ; COMANDO PARA POSICIONAR O CURSOR
00D2   2070           00005         CALL    ESCREVE         ; LINHA 1 / COLUNA 0
00D3   1409           00006         BSF     RS                      ; SELECIONA O DISPLAY P/ DADOS
                      00007                                                 ; COMANDOS PARA ESCREVER AS
                      00008                                                 ; LETRAS DE "TENSÃO:"
00D4   304E           00009         MOVLW   'N'
00D5   2070           00010         CALL    ESCREVE
00D6   3049           00011         MOVLW   'I'
00D7   2070           00012         CALL    ESCREVE
00D8   3056           00013         MOVLW   'V'
00D9   2070           00014         CALL    ESCREVE
00DA   3045           00015         MOVLW   'E'
00DB   2070           00016         CALL    ESCREVE
00DC   304C           00017         MOVLW   'L'
00DD   2070           00018         CALL    ESCREVE
00DE   3020           00019         MOVLW   ' '
00DF   2070           00020         CALL    ESCREVE
00E0   3044           00021         MOVLW   'D'
00E1   2070           00022         CALL    ESCREVE
00E2   3045           00023         MOVLW   'E'
00E3   2070           00024         CALL    ESCREVE
00E4   3020           00025         MOVLW   ' '
00E5   2070           00026         CALL    ESCREVE
00E6   3053           00027         MOVLW   'S'
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00E7   2070           00028         CALL    ESCREVE
00E8   3041           00029         MOVLW   'A'
00E9   2070           00030         CALL    ESCREVE
00EA   3042           00031         MOVLW   'B'
00EB   2070           00032         CALL    ESCREVE
00EC   3041           00033         MOVLW   'A'
00ED   2070           00034         CALL    ESCREVE
00EE   304F           00035         MOVLW   'O'
00EF   2070           00036         CALL    ESCREVE
00F0   303A           00037         MOVLW   ':'
00F1   2070           00038         CALL    ESCREVE
00F2   1009           00039         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
00F3   30C0           00040         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
00F4   2070           00041         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
                      00042 
00F5   1409           00043         BSF     RS 
                      00044 
Warning[203]: Found opcode in column 1. (RETURN)
00F6   0008           00045 RETURN
                      00046 
00F7                  00047 NIVEL_AGUA
00F7   1009           00048         BCF             RS              ; SELECIONA O DISPLAY P/ COMANDOS
00F8   3080           00049         MOVLW   0X80            ; COMANDO PARA POSICIONAR O CURSOR
00F9   2070           00050         CALL    ESCREVE         ; LINHA 1 / COLUNA 0
00FA   1409           00051         BSF     RS                      ; SELECIONA O DISPLAY P/ DADOS
                      00052                                                 ; COMANDOS PARA ESCREVER AS
                      00053                                                 ; LETRAS DE "TENSÃO:"
00FB   304E           00054         MOVLW   'N'
00FC   2070           00055         CALL    ESCREVE
00FD   3049           00056         MOVLW   'I'
00FE   2070           00057         CALL    ESCREVE
00FF   3056           00058         MOVLW   'V'
0100   2070           00059         CALL    ESCREVE
0101   3045           00060         MOVLW   'E'
0102   2070           00061         CALL    ESCREVE
0103   304C           00062         MOVLW   'L'
0104   2070           00063         CALL    ESCREVE
0105   3020           00064         MOVLW   ' '
0106   2070           00065         CALL    ESCREVE
0107   3044           00066         MOVLW   'D'
0108   2070           00067         CALL    ESCREVE
0109   3045           00068         MOVLW   'E'
010A   2070           00069         CALL    ESCREVE
010B   3020           00070         MOVLW   ' '
010C   2070           00071         CALL    ESCREVE
010D   3041           00072         MOVLW   'A'
010E   2070           00073         CALL    ESCREVE
010F   3047           00074         MOVLW   'G'
0110   2070           00075         CALL    ESCREVE
0111   3055           00076         MOVLW   'U'
0112   2070           00077         CALL    ESCREVE
0113   3041           00078         MOVLW   'A'
0114   2070           00079         CALL    ESCREVE
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0115   303A           00080         MOVLW   ':'
0116   2070           00081         CALL    ESCREVE
0117   3020           00082         MOVLW   ' '
0118   2070           00083         CALL    ESCREVE
0119   3020           00084         MOVLW   ' '
011A   2070           00085         CALL    ESCREVE
011B   1009           00086         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
011C   30C0           00087         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
011D   2070           00088         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
                      00089 
011E   1409           00090         BSF     RS 
                      00091 
Warning[203]: Found opcode in column 1. (RETURN)
011F   0008           00092 RETURN
                      00093 
0120                  00094 NIVEL_AMACIANTE
0120   1009           00095         BCF             RS              ; SELECIONA O DISPLAY P/ COMANDOS
0121   3080           00096         MOVLW   0X80            ; COMANDO PARA POSICIONAR O CURSOR
0122   2070           00097         CALL    ESCREVE         ; LINHA 1 / COLUNA 0
0123   1409           00098         BSF     RS                      ; SELECIONA O DISPLAY P/ DADOS
                      00099                                                 ; COMANDOS PARA ESCREVER AS
                      00100                                                 ; LETRAS DE "TENSÃO:"
0124   304E           00101         MOVLW   'N'
0125   2070           00102         CALL    ESCREVE
0126   3049           00103         MOVLW   'I'
0127   2070           00104         CALL    ESCREVE
0128   3056           00105         MOVLW   'V'
0129   2070           00106         CALL    ESCREVE
012A   3045           00107         MOVLW   'E'
012B   2070           00108         CALL    ESCREVE
012C   304C           00109         MOVLW   'L'
012D   2070           00110         CALL    ESCREVE
012E   3020           00111         MOVLW   ' '
012F   2070           00112         CALL    ESCREVE
0130   3041           00113         MOVLW   'A'
0131   2070           00114         CALL    ESCREVE
0132   304D           00115         MOVLW   'M'
0133   2070           00116         CALL    ESCREVE
0134   3041           00117         MOVLW   'A'
0135   2070           00118         CALL    ESCREVE
0136   3043           00119         MOVLW   'C'
0137   2070           00120         CALL    ESCREVE
0138   3049           00121         MOVLW   'I'
0139   2070           00122         CALL    ESCREVE
013A   3041           00123         MOVLW   'A'
013B   2070           00124         CALL    ESCREVE
013C   304E           00125         MOVLW   'N'
013D   2070           00126         CALL    ESCREVE
013E   3054           00127         MOVLW   'T'
013F   2070           00128         CALL    ESCREVE
0140   3045           00129         MOVLW   'E'
0141   2070           00130         CALL    ESCREVE
0142   303A           00131         MOVLW   ':'
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0143   2070           00132         CALL    ESCREVE
0144   1009           00133         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
0145   30C0           00134         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
0146   2070           00135         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
                      00136 
0147   1409           00137         BSF     RS 
                      00138 
Warning[203]: Found opcode in column 1. (RETURN)
0148   0008           00139 RETURN
                      00140 
0149                  00141 TIPO_ROUPA
0149   1009           00142         BCF             RS              ; SELECIONA O DISPLAY P/ COMANDOS
014A   3080           00143         MOVLW   0X80            ; COMANDO PARA POSICIONAR O CURSOR
014B   2070           00144         CALL    ESCREVE         ; LINHA 0 / COLUNA 3
014C   1409           00145         BSF     RS                      ; SELECIONA O DISPLAY P/ DADOS
                      00146                                                 ; COMANDOS PARA ESCREVER AS
                      00147                                                 ; LETRAS DE "TENSÃO:"
014D   3054           00148         MOVLW   'T'
014E   2070           00149         CALL    ESCREVE
014F   3049           00150         MOVLW   'I'
0150   2070           00151         CALL    ESCREVE
0151   3050           00152         MOVLW   'P'
0152   2070           00153         CALL    ESCREVE
0153   304F           00154         MOVLW   'O'
0154   2070           00155         CALL    ESCREVE
0155   3020           00156         MOVLW   ' '
0156   2070           00157         CALL    ESCREVE
0157   3044           00158         MOVLW   'D'
0158   2070           00159         CALL    ESCREVE
0159   3045           00160         MOVLW   'E'
015A   2070           00161         CALL    ESCREVE
015B   3020           00162         MOVLW   ' '
015C   2070           00163         CALL    ESCREVE
015D   3052           00164         MOVLW   'R'
015E   2070           00165         CALL    ESCREVE
015F   304F           00166         MOVLW   'O'
0160   2070           00167         CALL    ESCREVE
0161   3055           00168         MOVLW   'U'
0162   2070           00169         CALL    ESCREVE
0163   3050           00170         MOVLW   'P'
0164   2070           00171         CALL    ESCREVE
0165   3041           00172         MOVLW   'A'
0166   2070           00173         CALL    ESCREVE
0167   303A           00174         MOVLW   ':'
0168   2070           00175         CALL    ESCREVE
0169   3020           00176         MOVLW   ' '
016A   2070           00177         CALL    ESCREVE
016B   3020           00178         MOVLW   ' '
016C   2070           00179         CALL    ESCREVE
016D   1009           00180         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
016E   30C0           00181         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
016F   2070           00182         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
0170   1409           00183         BSF     RS 
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00184 
Warning[203]: Found opcode in column 1. (RETURN)
0171   0008           00185 RETURN
                      00186 
0172                  00187 TIPO_SUJEIRA
0172   1009           00188         BCF             RS              ; SELECIONA O DISPLAY P/ COMANDOS
0173   3080           00189         MOVLW   0X80            ; COMANDO PARA POSICIONAR O CURSOR
0174   2070           00190         CALL    ESCREVE         ; LINHA 0 / COLUNA 3
0175   1409           00191         BSF     RS                      ; SELECIONA O DISPLAY P/ DADOS
                      00192                                                 ; COMANDOS PARA ESCREVER AS
                      00193                                                 ; LETRAS DE "TENSÃO:"
0176   3054           00194         MOVLW   'T'
0177   2070           00195         CALL    ESCREVE
0178   3049           00196         MOVLW   'I'
0179   2070           00197         CALL    ESCREVE
017A   3050           00198         MOVLW   'P'
017B   2070           00199         CALL    ESCREVE
017C   304F           00200         MOVLW   'O'
017D   2070           00201         CALL    ESCREVE
017E   3020           00202         MOVLW   ' '
017F   2070           00203         CALL    ESCREVE
0180   3044           00204         MOVLW   'D'
0181   2070           00205         CALL    ESCREVE
0182   3045           00206         MOVLW   'E'
0183   2070           00207         CALL    ESCREVE
0184   3020           00208         MOVLW   ' '
0185   2070           00209         CALL    ESCREVE
0186   3053           00210         MOVLW   'S'
0187   2070           00211         CALL    ESCREVE
0188   3055           00212         MOVLW   'U'
0189   2070           00213         CALL    ESCREVE
018A   304A           00214         MOVLW   'J'
018B   2070           00215         CALL    ESCREVE
018C   3045           00216         MOVLW   'E'
018D   2070           00217         CALL    ESCREVE
018E   3049           00218         MOVLW   'I'
018F   2070           00219         CALL    ESCREVE
0190   3052           00220         MOVLW   'R'
0191   2070           00221         CALL    ESCREVE
0192   3041           00222         MOVLW   'A'
0193   2070           00223         CALL    ESCREVE
0194   303A           00224         MOVLW   ':'
0195   2070           00225         CALL    ESCREVE
0196   1009           00226         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
0197   30C0           00227         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
0198   2070           00228         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
0199   1409           00229         BSF     RS 
                      00230 
Warning[203]: Found opcode in column 1. (RETURN)
019A   0008           00231 RETURN
                      00232 
                      00233 
019B                  00234 MOSTRA_OPCAO
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

019B   1009           00235         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
019C   30C0           00236         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
019D   2070           00237         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
                      00238 
019E   1409           00239         BSF     RS      
                      00240 
019F   0847           00241         MOVF    OPCAO_INSERIDA,W        
01A0   3E30           00242         ADDLW   .48
01A1   2070           00243         CALL    ESCREVE 
01A2   3020           00244         MOVLW   ' '
01A3   2070           00245         CALL    ESCREVE
01A4   302D           00246         MOVLW   '-'
01A5   2070           00247         CALL    ESCREVE
01A6   3020           00248         MOVLW   ' '
01A7   2070           00249         CALL    ESCREVE
01A8   3020           00250         MOVLW   ' '
01A9   2070           00251         CALL    ESCREVE
01AA   3020           00252         MOVLW   ' '
01AB   2070           00253         CALL    ESCREVE
01AC   303C           00254         MOVLW   '<'
01AD   2070           00255         CALL    ESCREVE
01AE   3050           00256         MOVLW   'P'
01AF   2070           00257         CALL    ESCREVE
01B0   3052           00258         MOVLW   'R'
01B1   2070           00259         CALL    ESCREVE
01B2   3045           00260         MOVLW   'E'
01B3   2070           00261         CALL    ESCREVE
01B4   3053           00262         MOVLW   'S'
01B5   2070           00263         CALL    ESCREVE
01B6   3053           00264         MOVLW   'S'
01B7   2070           00265         CALL    ESCREVE
01B8   3020           00266         MOVLW   ' '
01B9   2070           00267         CALL    ESCREVE
01BA   304F           00268         MOVLW   'O'
01BB   2070           00269         CALL    ESCREVE
01BC   304B           00270         MOVLW   'K'
01BD   2070           00271         CALL    ESCREVE
01BE   303E           00272         MOVLW   '>'
01BF   2070           00273         CALL    ESCREVE
01C0   1409           00274         BSF     RS 
Warning[203]: Found opcode in column 1. (RETURN)
01C1   0008           00275 RETURN
                      00276 
                      00277 
01C2                  00278 MOSTRA_ETAPA4
01C2   0847           00279         MOVF    OPCAO_INSERIDA,W
01C3   3A01           00280         XORLW   .1                              ;DÍGITO 1.
01C4   1903           00281         BTFSC   STATUS,Z                ;TESTA SE O DÍGITO INSERIDO É O NÚMERO 1.
01C5   29EB           00282         GOTO    COLORIDA
                      00283 
01C6   1009           00284         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
01C7   30C0           00285         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
01C8   2070           00286         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00287 
01C9   1409           00288         BSF     RS 
                      00289         
                      00290 
                      00291 
                      00292         
01CA   3031           00293         MOVLW   '1'
01CB   2070           00294         CALL    ESCREVE
01CC   302D           00295         MOVLW   '-'
01CD   2070           00296         CALL    ESCREVE
01CE   3020           00297         MOVLW   ' '
01CF   2070           00298         CALL    ESCREVE
01D0   3052           00299         MOVLW   'R'
01D1   2070           00300         CALL    ESCREVE
01D2   304F           00301         MOVLW   'O'
01D3   2070           00302         CALL    ESCREVE
01D4   3055           00303         MOVLW   'U'
01D5   2070           00304         CALL    ESCREVE
01D6   3050           00305         MOVLW   'P'
01D7   2070           00306         CALL    ESCREVE
01D8   3041           00307         MOVLW   'A'
01D9   2070           00308         CALL    ESCREVE
01DA   3020           00309         MOVLW   ' '
01DB   2070           00310         CALL    ESCREVE
01DC   3042           00311         MOVLW   'B'
01DD   2070           00312         CALL    ESCREVE
01DE   3052           00313         MOVLW   'R'
01DF   2070           00314         CALL    ESCREVE
01E0   3041           00315         MOVLW   'A'
01E1   2070           00316         CALL    ESCREVE
01E2   304E           00317         MOVLW   'N'
01E3   2070           00318         CALL    ESCREVE
01E4   3043           00319         MOVLW   'C'
01E5   2070           00320         CALL    ESCREVE
01E6   3041           00321         MOVLW   'A'
01E7   2070           00322         CALL    ESCREVE
01E8   3020           00323         MOVLW   ' '
01E9   2070           00324         CALL    ESCREVE
01EA   1409           00325         BSF     RS 
                      00326 
Warning[207]: Found label after column 1. (COLORIDA)
01EB                  00327         COLORIDA
01EB   0847           00328         MOVF    OPCAO_INSERIDA,W
01EC   3A02           00329         XORLW   .2                              ;DÍGITO 1.
01ED   1903           00330         BTFSC   STATUS,Z                ;TESTA SE O DÍGITO INSERIDO É O NÚMERO 3.
01EE   2A10           00331         GOTO    COBERTOR
                      00332 
                      00333         
01EF   3032           00334         MOVLW   '2'
01F0   2070           00335         CALL    ESCREVE
01F1   302D           00336         MOVLW   '-'
01F2   2070           00337         CALL    ESCREVE
01F3   3052           00338         MOVLW   'R'
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01F4   2070           00339         CALL    ESCREVE
01F5   304F           00340         MOVLW   'O'
01F6   2070           00341         CALL    ESCREVE
01F7   3055           00342         MOVLW   'U'
01F8   2070           00343         CALL    ESCREVE
01F9   3050           00344         MOVLW   'P'
01FA   2070           00345         CALL    ESCREVE
01FB   3041           00346         MOVLW   'A'
01FC   2070           00347         CALL    ESCREVE
01FD   3020           00348         MOVLW   ' '
01FE   2070           00349         CALL    ESCREVE
01FF   3043           00350         MOVLW   'C'
0200   2070           00351         CALL    ESCREVE
0201   304F           00352         MOVLW   'O'
0202   2070           00353         CALL    ESCREVE
0203   304C           00354         MOVLW   'L'
0204   2070           00355         CALL    ESCREVE
0205   304F           00356         MOVLW   'O'
0206   2070           00357         CALL    ESCREVE
0207   3052           00358         MOVLW   'R'
0208   2070           00359         CALL    ESCREVE
0209   3049           00360         MOVLW   'I'
020A   2070           00361         CALL    ESCREVE
020B   3044           00362         MOVLW   'D'
020C   2070           00363         CALL    ESCREVE
020D   3041           00364         MOVLW   'A'
020E   2070           00365         CALL    ESCREVE
020F   1409           00366         BSF     RS 
                      00367 
Warning[207]: Found label after column 1. (COBERTOR)
0210                  00368         COBERTOR
0210   0847           00369         MOVF    OPCAO_INSERIDA,W
0211   3A03           00370         XORLW   .3                              ;DÍGITO 1.
0212   1903           00371         BTFSC   STATUS,Z                ;TESTA SE O DÍGITO INSERIDO É O NÚMERO 3.
0213   2A35           00372         GOTO    DELICADA
                      00373 
                      00374         
0214   3033           00375         MOVLW   '3'
0215   2070           00376         CALL    ESCREVE
0216   302D           00377         MOVLW   '-'
0217   2070           00378         CALL    ESCREVE
0218   3020           00379         MOVLW   ' '
0219   2070           00380         CALL    ESCREVE
021A   3043           00381         MOVLW   'C'
021B   2070           00382         CALL    ESCREVE
021C   304F           00383         MOVLW   'O'
021D   2070           00384         CALL    ESCREVE
021E   3042           00385         MOVLW   'B'
021F   2070           00386         CALL    ESCREVE
0220   3045           00387         MOVLW   'E'
0221   2070           00388         CALL    ESCREVE
0222   3052           00389         MOVLW   'R'
0223   2070           00390         CALL    ESCREVE
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0224   3054           00391         MOVLW   'T'
0225   2070           00392         CALL    ESCREVE
0226   304F           00393         MOVLW   'O'
0227   2070           00394         CALL    ESCREVE
0228   3052           00395         MOVLW   'R'
0229   2070           00396         CALL    ESCREVE
022A   3020           00397         MOVLW   ' '
022B   2070           00398         CALL    ESCREVE
022C   3020           00399         MOVLW   ' '
022D   2070           00400         CALL    ESCREVE
022E   3020           00401         MOVLW   ' '
022F   2070           00402         CALL    ESCREVE
0230   3020           00403         MOVLW   ' '
0231   2070           00404         CALL    ESCREVE
0232   3020           00405         MOVLW   ' '
0233   2070           00406         CALL    ESCREVE
0234   1409           00407         BSF     RS 
                      00408 
                      00409 
Warning[207]: Found label after column 1. (DELICADA)
0235                  00410         DELICADA
0235   0847           00411         MOVF    OPCAO_INSERIDA,W
0236   3A04           00412         XORLW   .4                              ;DÍGITO 1.
0237   1903           00413         BTFSC   STATUS,Z                ;TESTA SE O DÍGITO INSERIDO É O NÚMERO 4.
0238   0008           00414         RETURN
                      00415 
                      00416         
0239   3034           00417         MOVLW   '4'
023A   2070           00418         CALL    ESCREVE
023B   302D           00419         MOVLW   '-'
023C   2070           00420         CALL    ESCREVE
023D   3052           00421         MOVLW   'R'
023E   2070           00422         CALL    ESCREVE
023F   304F           00423         MOVLW   'O'
0240   2070           00424         CALL    ESCREVE
0241   3055           00425         MOVLW   'U'
0242   2070           00426         CALL    ESCREVE
0243   3050           00427         MOVLW   'P'
0244   2070           00428         CALL    ESCREVE
0245   3041           00429         MOVLW   'A'
0246   2070           00430         CALL    ESCREVE
0247   3020           00431         MOVLW   ' '
0248   2070           00432         CALL    ESCREVE
0249   3044           00433         MOVLW   'D'
024A   2070           00434         CALL    ESCREVE
024B   3045           00435         MOVLW   'E'
024C   2070           00436         CALL    ESCREVE
024D   304C           00437         MOVLW   'L'
024E   2070           00438         CALL    ESCREVE
024F   3049           00439         MOVLW   'I'
0250   2070           00440         CALL    ESCREVE
0251   3043           00441         MOVLW   'C'
0252   2070           00442         CALL    ESCREVE
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0253   3041           00443         MOVLW   'A'
0254   2070           00444         CALL    ESCREVE
0255   3044           00445         MOVLW   'D'
0256   2070           00446         CALL    ESCREVE
0257   3041           00447         MOVLW   'A'
0258   2070           00448         CALL    ESCREVE
0259   1409           00449         BSF     RS 
Warning[203]: Found opcode in column 1. (RETURN)
025A   0008           00450 RETURN
                      00451 
025B                  00452 MOSTRA_ETAPA5
025B   0847           00453         MOVF    OPCAO_INSERIDA,W
025C   3A00           00454         XORLW   .0                              ;DÍGITO 1.
025D   1903           00455         BTFSC   STATUS,Z                ;TESTA SE O DÍGITO INSERIDO É O NÚMERO 1.
025E   2A83           00456         GOTO    SUJA
                      00457 
                      00458 
025F   1009           00459         BCF     RS                              ; SELECIONA O DISPLAY P/ COMANDO
0260   30C0           00460         MOVLW   0XC0                    ; COMANDO PARA POSICIONAR O CURSOR
0261   2070           00461         CALL    ESCREVE                 ; LINHA 2 / COLUNA 0
                      00462 
0262   1409           00463         BSF     RS 
                      00464         
                      00465 
                      00466         
0263   3031           00467         MOVLW   '1'
0264   2070           00468         CALL    ESCREVE
0265   302D           00469         MOVLW   '-'
0266   2070           00470         CALL    ESCREVE
0267   3020           00471         MOVLW   ' '
0268   2070           00472         CALL    ESCREVE
0269   3050           00473         MOVLW   'P'
026A   2070           00474         CALL    ESCREVE
026B   304F           00475         MOVLW   'O'
026C   2070           00476         CALL    ESCREVE
026D   3055           00477         MOVLW   'U'
026E   2070           00478         CALL    ESCREVE
026F   3043           00479         MOVLW   'C'
0270   2070           00480         CALL    ESCREVE
0271   304F           00481         MOVLW   'O'
0272   2070           00482         CALL    ESCREVE
0273   3020           00483         MOVLW   ' '
0274   2070           00484         CALL    ESCREVE
0275   3053           00485         MOVLW   'S'
0276   2070           00486         CALL    ESCREVE
0277   3055           00487         MOVLW   'U'
0278   2070           00488         CALL    ESCREVE
0279   304A           00489         MOVLW   'J'
027A   2070           00490         CALL    ESCREVE
027B   3041           00491         MOVLW   'A'
027C   2070           00492         CALL    ESCREVE
027D   3020           00493         MOVLW   ' '
027E   2070           00494         CALL    ESCREVE
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

027F   3020           00495         MOVLW   ' '
0280   2070           00496         CALL    ESCREVE
0281   3020           00497         MOVLW   ' '
0282   2070           00498         CALL    ESCREVE
                      00499 
Warning[207]: Found label after column 1. (SUJA)
0283                  00500         SUJA
                      00501 
0283   0847           00502         MOVF    OPCAO_INSERIDA,W
0284   3A01           00503         XORLW   .1                              ;DÍGITO 1.
0285   1903           00504         BTFSC   STATUS,Z                ;TESTA SE O DÍGITO INSERIDO É O NÚMERO 1.
0286   2AA7           00505         GOTO    MUITO_SUJA
                      00506 
                      00507         
0287   3032           00508         MOVLW   '2'
0288   2070           00509         CALL    ESCREVE
0289   302D           00510         MOVLW   '-'
028A   2070           00511         CALL    ESCREVE
028B   3053           00512         MOVLW   'S'
028C   2070           00513         CALL    ESCREVE
028D   3055           00514         MOVLW   'U'
028E   2070           00515         CALL    ESCREVE
028F   304A           00516         MOVLW   'J'
0290   2070           00517         CALL    ESCREVE
0291   3041           00518         MOVLW   'A'
0292   2070           00519         CALL    ESCREVE
0293   3020           00520         MOVLW   ' '
0294   2070           00521         CALL    ESCREVE
0295   3020           00522         MOVLW   ' '
0296   2070           00523         CALL    ESCREVE
0297   3020           00524         MOVLW   ' '
0298   2070           00525         CALL    ESCREVE
0299   3020           00526         MOVLW   ' '
029A   2070           00527         CALL    ESCREVE
029B   3020           00528         MOVLW   ' '
029C   2070           00529         CALL    ESCREVE
029D   3020           00530         MOVLW   ' '
029E   2070           00531         CALL    ESCREVE
029F   3020           00532         MOVLW   ' '
02A0   2070           00533         CALL    ESCREVE
02A1   3020           00534         MOVLW   ' '
02A2   2070           00535         CALL    ESCREVE
02A3   3044           00536         MOVLW   'D'
02A4   2070           00537         CALL    ESCREVE
02A5   3041           00538         MOVLW   'A'
02A6   2070           00539         CALL    ESCREVE
                      00540 
Warning[207]: Found label after column 1. (MUITO_SUJA)
02A7                  00541         MUITO_SUJA
                      00542 
02A7   0847           00543         MOVF    OPCAO_INSERIDA,W
02A8   3A02           00544         XORLW   .2                              ;DÍGITO 1.
02A9   1903           00545         BTFSC   STATUS,Z                ;TESTA SE O DÍGITO INSERIDO É O NÚMERO 2.
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02AA   2ADD           00546         GOTO    $+33
                      00547 
                      00548         
02AB   3033           00549         MOVLW   '3'
02AC   2070           00550         CALL    ESCREVE
02AD   302D           00551         MOVLW   '-'
02AE   2070           00552         CALL    ESCREVE
02AF   304D           00553         MOVLW   'M'
02B0   2070           00554         CALL    ESCREVE
02B1   3055           00555         MOVLW   'U'
02B2   2070           00556         CALL    ESCREVE
02B3   3049           00557         MOVLW   'I'
02B4   2070           00558         CALL    ESCREVE
02B5   3054           00559         MOVLW   'T'
02B6   2070           00560         CALL    ESCREVE
02B7   304F           00561         MOVLW   'O'
02B8   2070           00562         CALL    ESCREVE
02B9   3020           00563         MOVLW   ' '
02BA   2070           00564         CALL    ESCREVE
02BB   3053           00565         MOVLW   'S'
02BC   2070           00566         CALL    ESCREVE
02BD   3055           00567         MOVLW   'U'
02BE   2070           00568         CALL    ESCREVE
02BF   304A           00569         MOVLW   'J'
02C0   2070           00570         CALL    ESCREVE
02C1   3041           00571         MOVLW   'A'
02C2   2070           00572         CALL    ESCREVE
02C3   3020           00573         MOVLW   ' '
02C4   2070           00574         CALL    ESCREVE
02C5   3020           00575         MOVLW   ' '
02C6   2070           00576         CALL    ESCREVE
02C7   3020           00577         MOVLW   ' '
02C8   2070           00578         CALL    ESCREVE
02C9   3020           00579         MOVLW   ' '
02CA   2070           00580         CALL    ESCREVE
                      00581 
Warning[203]: Found opcode in column 1. (RETURN)
02CB   0008           00582 RETURN
                      00417 #INCLUDE        "TECLADO_MATRICIAL.INC"
                      00001 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00002 ;*                       ROTINAS E SUBROTINAS                              *
                      00003 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00004 ; CADA ROTINA OU SUBROTINA DEVE POSSUIR A DESCRIÇÃO DE FUNCIONAMENTO
                      00005 ; E UM NOME COERENTE ÀS SUAS FUNÇÕES.
                      00006 
02CC                  00007 LEITURA
02CC   30FE           00008         MOVLW   B'11111110'
02CD   00C0           00009         MOVWF   LINHA                   
                      00010         
02CE                  00011 START:
02CE   0087           00012         MOVWF   PORTC                   ;começa no bit 0
02CF   0806           00013         MOVF    PORTB,W 
02D0   00C3           00014         MOVWF   COLUNA                  ;GUARDA PORTB EM COLUNA
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00015         
02D1   30F0           00016         MOVLW   B'11110000'             ;MÁSCARA NO REGISTRADOR COLUNA
02D2   0443           00017         IORWF   COLUNA,W                ;PARA LIMPAR OS BITS MAIS SIGNIFICATIVOS
02D3   3AFF           00018         XORLW   0xFF                    ;operação lógica, verifica se tecla não
02D4   1903           00019         BTFSC   STATUS,Z                ;foi acionada
02D5   2AD7           00020         GOTO    ROTACIONAR              ;não foi acionada
02D6   2ADF           00021         GOTO    TEST_TECLA
                      00022         
02D7                  00023 ROTACIONAR:
02D7   1403           00024         BSF             STATUS,C
02D8   30F7           00025         MOVLW   B'11110111'
02D9   0640           00026         XORWF   LINHA,W                 ;chegou ao bit 0?
02DA   1903           00027         BTFSC   STATUS,Z                ;
02DB   2ACC           00028         GOTO    LEITURA                 ;sim
Message[305]: Using default destination of 1 (file).
02DC   0DC0           00029         RLF             LINHA                   ;não
02DD   0840           00030         MOVF    LINHA,W
02DE   2ACE           00031         GOTO    START
                      00032 
02DF                  00033 TEST_TECLA:
02DF   3005           00034         MOVLW   .5                              ;TEMPO DE 5ms
02E0   23D9           00035         CALL    DELAY
02E1   0806           00036         MOVF    PORTB,W 
02E2   00C3           00037         MOVWF   COLUNA                  ;GUARDA PORTB EM COLUNA
02E3                  00038 ESPERA:
02E3   0806           00039         MOVF    PORTB,W 
02E4   0443           00040         IORWF   COLUNA,W                ;PARA LIMPAR OS BITS MAIS SIGNIFICATIVOS
02E5   3AFF           00041         XORLW   0xFF
02E6   1D03           00042         BTFSS   STATUS,Z
02E7   2AE3           00043         GOTO    ESPERA
02E8   2AE9           00044         GOTO    DET_TECLA
                      00045         
                      00046 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
                      00047 ;*                              SUBROTINAS                                                              
                               *
                      00048 ;* * * * * * * * * * * * * *  * * * * * * *  * * * * * * * *
02E9                  00049 DET_TECLA:
02E9   1DC0           00050         BTFSS   LINHA,3         ;VERIFICA QUAL LINHA ESTÁ ACIONADA
02EA   2B3A           00051         GOTO    LINHA3
02EB   1D40           00052         BTFSS   LINHA,2
02EC   2B0A           00053         GOTO    LINHA2
02ED   1CC0           00054         BTFSS   LINHA,1
02EE   2B03           00055         GOTO    LINHA1
                      00056 
02EF                  00057 LINHA0:
02EF   18C3           00058         BTFSC   COLUNA,1        ;TESTA SE É O DÍGITO 1
02F0   2AF6           00059         GOTO    $+6
02F1   3001           00060         MOVLW   .1
02F2   00C7           00061         MOVWF   OPCAO_INSERIDA
02F3   219B           00062         CALL    MOSTRA_OPCAO    ;ESPERA CONFIRMAÇÃO OU RETORNO (DÍGITO F)
02F4   235C           00063         CALL    CONFIRMA_CANCELA
02F5   2ACC           00064         GOTO    LEITURA
                      00065 
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02F6   1943           00066         BTFSC   COLUNA,2        ;TESTA SE É O DÍGITO 2
02F7   2AFD           00067         GOTO    $+6
02F8   3002           00068         MOVLW   .2
02F9   00C7           00069         MOVWF   OPCAO_INSERIDA
02FA   219B           00070         CALL    MOSTRA_OPCAO    ;ESPERA CONFIRMAÇÃO OU RETORNO (DÍGITO F)
02FB   235C           00071         CALL    CONFIRMA_CANCELA
                      00072         
02FC   19C3           00073         BTFSC   COLUNA,3        ;TESTA SE É O DÍGITO 3
02FD   2B02           00074         GOTO    $+5
02FE   3003           00075         MOVLW   .3
02FF   00C7           00076         MOVWF   OPCAO_INSERIDA
0300   219B           00077         CALL    MOSTRA_OPCAO    ;ESPERA CONFIRMAÇÃO OU RETORNO (DÍGITO F)
0301   235C           00078         CALL    CONFIRMA_CANCELA
0302   2ACC           00079         GOTO    LEITURA
                      00080 
                      00081 
0303                  00082 LINHA1:
0303   1843           00083         BTFSC   COLUNA,0        ;TESTA SE É O DÍGITO 4
0304   2B09           00084         GOTO    $+5
0305   3003           00085         MOVLW   .3
0306   00C7           00086         MOVWF   OPCAO_INSERIDA
0307   219B           00087         CALL    MOSTRA_OPCAO    ;ESPERA CONFIRMAÇÃO OU RETORNO (DÍGITO F)
0308   235C           00088         CALL    CONFIRMA_CANCELA
                      00089 
0309   2ACC           00090         GOTO    LEITURA
                      00091 
                      00092 
030A                  00093 LINHA2:
                      00094 
030A   3005           00095         MOVLW   .5
Message[305]: Using default destination of 1 (file).
030B   06C8           00096         XORWF   ETAPA_CONFIG    ;TESTA SE A CONFIGURAÇÃO ESTÁ NA ETAPA5
030C   1903           00097         BTFSC   STATUS,2
030D   2ACC           00098         GOTO    LEITURA
                      00099         
030E   0806           00100         MOVF    PORTB,W
030F   00C3           00101         MOVWF   COLUNA
0310   1943           00102         BTFSC   COLUNA,2                ;TECLA DECREMENTA (-) ?
0311   2B24           00103         GOTO    INCREMENTA
                      00104 
0312   3001           00105         MOVLW   .1
0313   23D9           00106         CALL    DELAY
0314   0806           00107         MOVF    PORTB,W
0315   00C3           00108         MOVWF   COLUNA
0316   1D43           00109         BTFSS   COLUNA,2        
0317   2B14           00110         GOTO    $-3
                      00111 
0318   3000           00112         MOVLW   .0      
0319   0647           00113         XORWF   OPCAO_INSERIDA,W
031A   1D03           00114         BTFSS   STATUS,2
031B   2B1F           00115         GOTO    $+4
031C   03C7           00116         DECF    OPCAO_INSERIDA,F
031D   225B           00117         CALL    MOSTRA_ETAPA5
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

031E   0008           00118         RETURN
                      00119 
031F   3002           00120         MOVLW   .2
0320   00C7           00121         MOVWF   OPCAO_INSERIDA
0321   225B           00122         CALL    MOSTRA_ETAPA5
0322   235C           00123         CALL    CONFIRMA_CANCELA
                      00124 
0323   2ACC           00125         GOTO    LEITURA
                      00126 
0324                  00127 INCREMENTA
0324   0806           00128         MOVF    PORTB,W
0325   00C3           00129         MOVWF   COLUNA
0326   19C3           00130         BTFSC   COLUNA,3                ;TECLA INCREMENTA (+) ?
0327   2ACC           00131         GOTO    LEITURA
                      00132 
0328   3001           00133         MOVLW   .1
0329   23D9           00134         CALL    DELAY
032A   0806           00135         MOVF    PORTB,W
032B   00C3           00136         MOVWF   COLUNA
032C   1DC3           00137         BTFSS   COLUNA,3        
032D   2B2A           00138         GOTO    $-3
                      00139 
032E   3002           00140         MOVLW   .2      
032F   0647           00141         XORWF   OPCAO_INSERIDA,W
0330   1D03           00142         BTFSS   STATUS,2
0331   2B35           00143         GOTO    $+4
0332   03C7           00144         DECF    OPCAO_INSERIDA,F
0333   225B           00145         CALL    MOSTRA_ETAPA5
0334   0008           00146         RETURN
                      00147 
0335   3000           00148         MOVLW   .0
0336   00C7           00149         MOVWF   OPCAO_INSERIDA
0337   225B           00150         CALL    MOSTRA_ETAPA5
0338   235C           00151         CALL    CONFIRMA_CANCELA
                      00152         
0339   2ACC           00153         GOTO    LEITURA
                      00154 
                      00155 
                      00156 
033A                  00157 LINHA3:
033A   1843           00158         BTFSC   COLUNA,0        ;TESTA SE É O DÍGITO "RESET"
033B   2B43           00159         GOTO    $+8
                      00160         
033C   3001           00161         MOVLW   .1
033D   23D9           00162         CALL    DELAY
033E   1843           00163         BTFSC   COLUNA,0        ;TESTA SE É O DÍGITO "RESET"
033F   2B43           00164         GOTO    $+4
0340   1C43           00165         BTFSS   COLUNA,0
0341   2B40           00166         GOTO    $-1
0342   2856           00167         GOTO    MAIN    ;VOLTA PARA O INÍCIO DO MAIN CASO PRESSIONE A TECLA "RESET"
                      00168 
                      00169 
0343   3006           00170         MOVLW   .6
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[305]: Using default destination of 1 (file).
0344   06C8           00171         XORWF   ETAPA_CONFIG    ;TESTA SE JA ESTÁ NA ETAPA 6 DE CONFIGURAÇÃO.
0345   1903           00172         BTFSC   STATUS,2
0346   2ACC           00173         GOTO    LEITURA
                      00174 
                      00175 
0347   18C3           00176         BTFSC   COLUNA,1        ;TESTA SE É O DÍGITO "PAUSAR"
0348   2B51           00177         GOTO    $+9
                      00178         
0349   3001           00179         MOVLW   .1
034A   23D9           00180         CALL    DELAY
034B   18C3           00181         BTFSC   COLUNA,1        ;TESTA SE É O DÍGITO "PAUSAR"
034C   2B51           00182         GOTO    $+5
034D   1CC3           00183         BTFSS   COLUNA,1
034E   2B4D           00184         GOTO    $-1
034F   300C           00185         MOVLW   .12
0350   00C7           00186         MOVWF   OPCAO_INSERIDA
                      00187 
                      00188 
Warning[207]: Found label after column 1. (PAUSAR_)
0351                  00189         PAUSAR_
                      00190 
0351   1943           00191         BTFSC   COLUNA,2        ;TESTA SE É O DÍGITO "CONTINUAR"
0352   2B5B           00192         GOTO    $+9
                      00193         
0353   3001           00194         MOVLW   .1
0354   23D9           00195         CALL    DELAY
0355   1943           00196         BTFSC   COLUNA,2        ;TESTA SE É O DÍGITO "CONTINUAR"
0356   2B5B           00197         GOTO    $+5
0357   1D43           00198         BTFSS   COLUNA,2
0358   2B57           00199         GOTO    $-1
0359   300D           00200         MOVLW   .13
035A   00C7           00201         MOVWF   OPCAO_INSERIDA
                      00202 
035B   2ACC           00203         GOTO    LEITURA
                      00204 
                      00205 
035C                  00206 CONFIRMA_CANCELA                ;NESTA ROTINA O PROGRAMA FICA AGUARDANDO A CONFIRMAÇÃO OU CANCELAMENTO D
                            A OPCAO INSERIDA.
035C   219B           00207         CALL    MOSTRA_OPCAO
035D   30F7           00208         MOVLW   B'11110111'
035E   0087           00209         MOVWF   PORTC
035F   19C3           00210         BTFSC   COLUNA,3        ;TESTA SE O DIGITO INSERIDO É "ENTER".
0360   2B69           00211         GOTO    ETAPAS
0361   3001           00212         MOVLW   .1
0362   23D9           00213         CALL    DELAY
0363   19C3           00214         BTFSC   COLUNA,3
0364   2B69           00215         GOTO    ETAPAS
0365   1DC3           00216         BTFSS   COLUNA,3        ;ESPERA ATÉ SOLTAR A TECLA.
0366   2B65           00217         GOTO    $-1
0367   23A0           00218         CALL    SALVA_OPCAO
0368   0008           00219         RETURN
                      00220 
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (ETAPAS)
0369                  00221         ETAPAS
                      00222 
0369   3005           00223         MOVLW   .5
036A   0648           00224         XORWF   ETAPA_CONFIG,W          ;É A ETAPA 5?
036B   1903           00225         BTFSC   STATUS,2
036C   2B8F           00226         GOTO    TESTA_ETAPA5            ;SIM
                      00227 
036D   30FD           00228         MOVLW   B'11111101'
036E   0087           00229         MOVWF   PORTC           ;TESTA SE ALGUMA TECLA DA LINHA 1 FOI PRESSIONADA
036F   0806           00230         MOVF    PORTB,W
0370   00C3           00231         MOVWF   COLUNA
0371   30FF           00232         MOVLW   B'11111111'
0372   0643           00233         XORWF   COLUNA,W
                      00234 
0373   1D03           00235         BTFSS   STATUS,2
0374   2B7E           00236         GOTO    TESTE_LINHA0    ;SE ALGUMA TECLA DESTA LINHA FOI PRESSIONADA, RETORNA PARA A ROTINA DE L
                            EITURA PARA
                      00237                                                                 ;IDENTIFICAR TECLA PRESSIONADA.
                      00238 
0375   3001           00239         MOVLW   .1
0376   23D9           00240         CALL    DELAY
0377   0806           00241         MOVF    PORTB,W
0378   00C3           00242         MOVWF   COLUNA
0379   30FF           00243         MOVLW   B'11111111'
037A   0643           00244         XORWF   COLUNA,W
037B   1903           00245         BTFSC   STATUS,2
037C   2B77           00246         GOTO    $-5
037D   0008           00247         RETURN
                      00248 
Warning[207]: Found label after column 1. (TESTE_LINHA0)
037E                  00249         TESTE_LINHA0
037E   30FE           00250         MOVLW   B'11111110'
037F   0087           00251         MOVWF   PORTC           ;TESTA SE ALGUMA TECLA DA LINHA 0 FOI PRESSIONADA
0380   0806           00252         MOVF    PORTB,W
0381   00C3           00253         MOVWF   COLUNA
0382   30FF           00254         MOVLW   B'11111111'
0383   0643           00255         XORWF   COLUNA,W
                      00256 
0384   1D03           00257         BTFSS   STATUS,2
0385   2B5C           00258         GOTO    CONFIRMA_CANCELA        ;SE ALGUMA TECLA DESTA LINHA FOI PRESSIONADA, RETORNA PARA A ROT
                            INA DE LEITURA PARA
                      00259                                                                 ;IDENTIFICAR TECLA PRESSIONADA.
                      00260 
0386   3001           00261         MOVLW   .1
0387   23D9           00262         CALL    DELAY
0388   0806           00263         MOVF    PORTB,W
0389   00C3           00264         MOVWF   COLUNA
038A   30FF           00265         MOVLW   B'11111111'
038B   0643           00266         XORWF   COLUNA,W
038C   1903           00267         BTFSC   STATUS,2
038D   2B88           00268         GOTO    $-5
038E   0008           00269         RETURN
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00270 
                      00271 
Warning[207]: Found label after column 1. (TESTA_ETAPA5)
038F                  00272         TESTA_ETAPA5
038F   30FB           00273         MOVLW   B'11111011'
0390   0087           00274         MOVWF   PORTC           ;TESTA SE ALGUMA TECLA DA LINHA 2 FOI PRESSIONADA
0391   0806           00275         MOVF    PORTB,W
0392   00C3           00276         MOVWF   COLUNA
0393   30FF           00277         MOVLW   B'11111111'
0394   0643           00278         XORWF   COLUNA,W
                      00279 
0395   1D03           00280         BTFSS   STATUS,2
0396   2B5C           00281         GOTO    CONFIRMA_CANCELA        ;SE ALGUMA TECLA DESTA LINHA FOI PRESSIONADA, RETORNA PARA A ROT
                            INA DE LEITURA PARA
                      00282                                                                 ;IDENTIFICAR TECLA PRESSIONADA.
                      00283 
0397   3001           00284         MOVLW   .1
0398   23D9           00285         CALL    DELAY
0399   0806           00286         MOVF    PORTB,W
039A   00C3           00287         MOVWF   COLUNA
039B   30FF           00288         MOVLW   B'11111111'
039C   0643           00289         XORWF   COLUNA,W
039D   1903           00290         BTFSC   STATUS,2
039E   2B99           00291         GOTO    $-5
039F   0008           00292         RETURN
                      00293 
                      00294 
                      00295 
03A0                  00296 SALVA_OPCAO
                      00297         
03A0   0847           00298         MOVF    OPCAO_INSERIDA,W
03A1   1283 1703      00299         BANKSEL EEDATA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03A3   008C           00300         MOVWF   EEDATA
03A4   1283 1303      00301         BANKSEL ENDERECO
03A6   0849           00302         MOVF    ENDERECO,W
03A7   1283 1703      00303         BANKSEL EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03A9   008D           00304         MOVWF   EEADR
03AA   1683 1703      00305         BANKSEL EECON1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03AC   138C           00306         BCF             EECON1,EEPGD
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03AD   150C           00307         BSF             EECON1,WREN
03AE   3055           00308         MOVLW   0x55
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03AF   008D           00309         MOVWF   EECON2                  ;OBRIGATÓRIO
03B0   30AA           00310         MOVLW   0xAA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03B1   008D           00311         MOVWF   EECON2                  ;OBRIGATÓRIO
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03B2   148C           00312         BSF             EECON1,WR               ;INICIA ESCRITA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03B3   188C           00313         BTFSC   EECON1,WR
03B4   2BB3           00314         GOTO    $-1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03B5   110C           00315         BCF             EECON1,WREN
03B6   1283 1303      00316         BANKSEL OPCAO_INSERIDA
Message[305]: Using default destination of 1 (file).
03B8   0AC9           00317         INCF    ENDERECO
                      00318 
03B9   3001           00319         MOVLW   .1
03BA   3A48           00320         XORLW   ETAPA_CONFIG
03BB   1903           00321         BTFSC   STATUS,2
03BC   285B           00322         GOTO    ETAPA2
                      00323 
                      00324 
                      00325 
                      00326 
                      00327 
03BD   0008           00328         RETURN
                      00329         
03BE                  00330 LEITURA_EEPROM:
                      00331         
03BE   0849           00332         MOVF    ENDERECO,W
03BF   1283 1703      00333         BANKSEL EEADR
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03C1   008D           00334         MOVWF   EEADR
03C2   1683 1703      00335         BANKSEL EECON1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03C4   138C           00336         BCF             EECON1,EEPGD
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03C5   140C           00337         BSF             EECON1,RD
03C6   1283 1703      00338         BANKSEL EEDATA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03C8   080C           00339         MOVF    EEDATA,W
03C9   1283 1303      00340         BANKSEL OPCAO_INSERIDA
03CB   00C7           00341         MOVWF   OPCAO_INSERIDA
                      00342 
Warning[203]: Found opcode in column 1. (RETURN)
03CC   0008           00343 RETURN
                      00418 #INCLUDE        "TRATA_DADOS_CONVERSAO.INC"
03CD                  00001 DELAY_2
03CD   00A6           00002         MOVWF   DELAY2
                      00003         
03CE                  00004 DELAY_MS
03CE   3003           00005         MOVLW   T6
03CF   00A5           00006         MOVWF   DELAY1
                      00007         
03D0                  00008 DELAY_US
03D0   3064           00009         MOVLW   T240
03D1   00A4           00010         MOVWF   DELAY0
03D2   0BA4           00011         DECFSZ  DELAY0,F
03D3   2BD2           00012         GOTO    $-1
                      00013         
03D4   0BA5           00014         DECFSZ  DELAY1,F
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03D5   2BD0           00015         GOTO    DELAY_US
                      00016 
Message[305]: Using default destination of 1 (file).
03D6   0BA6           00017         DECFSZ  DELAY2
03D7   2BCE           00018         GOTO    DELAY_MS
                      00019 
Warning[203]: Found opcode in column 1. (RETURN)
03D8   0008           00020 RETURN
                      00021 
                      00022 
03D9                  00023 DELAY
                      00024 
03D9   307D           00025         movlw   TEMPO_DELAY
03DA   00A2           00026         movwf   TEMPO1
                      00027 
03DB   307D           00028         movlw   TEMPO_DELAY
03DC   00A3           00029         movwf   TEMPO2
03DD   0BA3           00030         decfsz  TEMPO2,F        
03DE   2BDD           00031         goto    $-1                     ;RETORNA À LINHA ANTERIOR E DECREMENTA O CONTADOR TEMPO1
03DF   0BA2           00032         decfsz  TEMPO1,F
03E0   2BDB           00033         goto    $-5                     ;RETORNA À LINHA ANTERIOR E DECREMENTA O CONTADOR TEMPO2
                      00034 
03E1   0008           00035         return
                      00036 
                      00037 ;**************************************************************************
                      00038 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00039 ;*                                              CONVERSÃO A/D                          *
                      00040 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00041 ;ESTA SUB-ROTINA EFETUA A CONVERSAO A/D E ARMAZENA O BYTE       OBTIDO NA CONVERSÃO NO REGS DADO
                      00042 
                      00043 
03E2                  00044 CONVERSAO_AD
                      00045 
03E2   3001           00046         MOVLW   .1
03E3   23CD           00047         CALL    DELAY_2                         ;DELAY DE 1mS
03E4   151F           00048         BSF             ADCON0,GO                       ;HABILITA A CONVERSAO
03E5   191F           00049         BTFSC   ADCON0,GO                       ;SE ADCON,GO = 0, A CONVERSAO JÁ TERMINOU
03E6   2BE5           00050         GOTO    $-1
                      00051 
03E7   081E           00052         MOVF    ADRESH,W                
03E8   00B7           00053         MOVWF   MULT1_H                 ;MULTIHIGH = ADRESH
                      00054 
                      00055         BANK1
03E9   1303               M                                 bcf STATUS,RP1
03EA   1683               M                                 bsf     STATUS,RP0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
03EB   081E           00056         MOVF    ADRESL,W
                      00057 
                      00058         BANK0
03EC   1303               M                                 bcf STATUS,RP1
03ED   1283               M                                 bcf     STATUS,RP0
03EE   00B8           00059         MOVWF   MULT1_L
                      00060 
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03EF   3031           00061         MOVLW   b'00110001'             
03F0   00B3           00062         MOVWF   MULT_2                  
03F1   208C           00063         CALL    MULTI_10x8              ;MULTIPLICA ADRESH E ADRESL PELO PASSO VEZES 1000, POIS O TRATAM
                            ENTO NUMERICO NÃo SERA DIRETAMENTE
                      00064                                                         ;EXECUTADO POR PONTO FLUTUANTE (49...X *(5/1024)
                             = X * 0.0049) 
                      00065 
03F2   0835           00066         MOVF    PRODUTO_H,W     
03F3   00AC           00067         MOVWF   DIVIDENDO_H     ;DIVIDENDO_H = PARTE ALTA DO PRODUTO.
03F4   0836           00068         MOVF    PRODUTO_L,W     
03F5   00AB           00069         MOVWF   DIVIDENDO_L             ;DIVIDENDO_L = PARTE BAIXA DO PRODUTO.
                      00070 
03F6   3010           00071         MOVLW   b'00010000'             
03F7   00B0           00072         MOVWF   DIVISOR_L               ;MOVE CONTEUDO DE W PARA A PARTE BAIXA DO DIVISOR
03F8   3027           00073         MOVLW   b'00100111'             ;MOVE A PARTE ALTA DE 10000 PARA W
03F9   00AF           00074         MOVWF   DIVISOR_H       
                      00075 
03FA   20A5           00076         CALL    DIVIDE_16x16
                      00077 
03FB   082A           00078         MOVF    QUOCIENTE_L,W
03FC   00B9           00079         MOVWF   UNIDADE
                      00080 
03FD   0832           00081         MOVF    RESTO_H,W       
03FE   00AC           00082         MOVWF   DIVIDENDO_H  
03FF   0831           00083         MOVF    RESTO_L,W               
0400   00AB           00084         MOVWF   DIVIDENDO_L     
                      00085         
0401   3003           00086         MOVLW   b'00000011'             ;MOVE A PARTE ALTA DE 1000 PARA W
0402   00AF           00087         MOVWF   DIVISOR_H       ;MOVE O CONTEUDO DE W PARA A PARTE ALTA DO DIVISOR
0403   30E8           00088         MOVLW   b'11101000'             ;MOVE A PARTE BAIXA DE 1000 PARA W
0404   00B0           00089         MOVWF   DIVISOR_L       ;MOVE CONTEUDO DE W PARA A PARTE BAIXA DO DIVISOR
                      00090 
                      00091 
0405   20A5           00092         CALL    DIVIDE_16x16
                      00093 
0406   082A           00094         MOVF    QUOCIENTE_L,W
0407   00BA           00095         MOVWF   DEZENA
                      00096 
0408   0832           00097         MOVF    RESTO_H,W       ;MOVE A PARTE ALTA DO PRODUTO PARA W
0409   00AC           00098         MOVWF   DIVIDENDO_H ;MOVE O CONTEUDO DE W PARA A PARTE ALTA DO DIVIDENDO
040A   0831           00099         MOVF    RESTO_L,W               ;MOVE A PARTE BAIXA DO PRODUTO PARA W
040B   00AB           00100         MOVWF   DIVIDENDO_L     ;MOVE O CONTEUDO DE W PARA A PARTE BAIXA DO DIVIDENDO
                      00101 
040C   3000           00102         MOVLW   b'00000000'                     ;MOVE A PARTE ALTA DE 100 PARA W
040D   00AF           00103         MOVWF   DIVISOR_H       ;MOVE O CONTEUDO DE W PARA A PARTE ALTA DO DIVISOR
040E   3064           00104         MOVLW   b'01100100'             ;MOVE A PARTE BAIXA DE 100 PARA W
040F   00B0           00105         MOVWF   DIVISOR_L       ;MOVE CONTEUDO DE W PARA A PARTE BAIXA DO DIVISOR
                      00106 
                      00107 
0410   20A5           00108         CALL    DIVIDE_16x16
                      00109 
0411   082A           00110         MOVF    QUOCIENTE_L,W
0412   00BB           00111         MOVWF   CENTENA
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00112 
0413   0832           00113         MOVF    RESTO_H,W       
0414   00AC           00114         MOVWF   DIVIDENDO_H
0415   0831           00115         MOVF    RESTO_L,W               
0416   00AB           00116         MOVWF   DIVIDENDO_L
                      00117 
0417   3000           00118         MOVLW   b'00000000'                             
0418   00AF           00119         MOVWF   DIVISOR_H       
0419   300A           00120         MOVLW   b'00001010'             
041A   00B0           00121         MOVWF   DIVISOR_L       
                      00122 
041B   20A5           00123         CALL    DIVIDE_16x16 
                      00124  
041C   082A           00125         MOVF    QUOCIENTE_L,W
041D   00BC           00126         MOVWF   MILHAR
                      00127 
041E   0831           00128         MOVF    RESTO_L,W
041F   00BD           00129         MOVWF   MILHAO
                      00130 
Warning[203]: Found opcode in column 1. (RETURN)
0420   0008           00131 RETURN
                      00132 
                      00133 
                      00134 
                      00135 
                      00136 
                      00137 
                      00138 
                      00139 
                      00140 
                      00141 
                      00142 
                      00143 
                      00144 
                      00145 
                      00146 
                      00147 
                      00148         
                      00149 
                      00150         
                      00419 
                      00420 
                      00421 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00422 ;*                       FIM DO PROGRAMA                           *
                      00423 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00424 
Warning[205]: Found directive in column 1. (END)
                      00425 END             ;OBRIGATÓRIO.
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
AUX                               0000003E
BANK0                             
BANK1                             
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
CARACTER                          00000045
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
CENTENA                           0000003B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
CKP                               00000004
COBERTOR                          00000210
COLORIDA                          000001EB
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

COLUNA                            00000043
COLUNA_                           00000044
CONFIRMA                          00000046
CONFIRMA_CANCELA                  0000035C
CONVERSAO_AD                      000003E2
COUNT1                            00000028
CREN                              00000004
CSRC                              00000007
D                                 00000005
DADO                              0000004A
DATA_ADDRESS                      00000005
DC                                00000001
DELAY                             000003D9
DELAY0                            00000024
DELAY1                            00000025
DELAY2                            00000026
DELAY_2                           000003CD
DELAY_MS                          000003CE
DELAY_US                          000003D0
DELICADA                          00000235
DET_TECLA                         000002E9
DEZENA                            0000003A
DISPLAY                           PORTD
DIV                               000000B6
DIVIDENDO_H                       0000002C
DIVIDENDO_L                       0000002B
DIVIDE_16x16                      000000A5
DIVISOR_H                         0000002F
DIVISOR_L                         00000030
D_A                               00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
EMPRESTA                          000000CC
ENABLE                            PORTE,1
ENDERECO                          00000049
ESCREVE                           00000070
ESCREVE_ni                        00000083
ESPERA                            000002E3
ETAPA1                            00000057
ETAPA2                            0000005B
ETAPA3                            0000005F
ETAPA4                            00000063
ETAPA5                            00000067
ETAPA6                            0000006D
ETAPAS                            00000369
ETAPA_CONFIG                      00000048
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

F                                 00000001
FERR                              00000002
FLAGS                             0000003F
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INCREMENTA                        00000324
INDF                              00000000
INICIALIZACAO_DISPLAY             0000002D
INICIO                            0000000C
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LEITURA                           000002CC
LEITURA_EEPROM                    000003BE
LIMPA_RAM                         00000022
LINHA                             00000040
LINHA0                            000002EF
LINHA1                            00000303
LINHA2                            0000030A
LINHA3                            0000033A
LINHA_                            00000041
MAIN                              00000056
MILHAO                            0000003D
MILHAR                            0000003C
MOSTRA_ETAPA4                     000001C2
MOSTRA_ETAPA5                     0000025B
MOSTRA_OPCAO                      0000019B
MUITO_SUJA                        000002A7
MULT1_H                           00000037
MULT1_L                           00000038
MULTIPLICA                        0000009C
MULTI_10x8                        0000008C
MULT_2                            00000033
MULT_TEMP                         00000034
NIBLE                             00000027
NIVEL_AGUA                        000000F7
NIVEL_AMACIANTE                   00000120
NIVEL_SABAO                       000000D0
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NUM                               00000042
OBF                               00000006
OERR                              00000001
OPCAO_INSERIDA                    00000047
OPTION_REG                        00000081
P                                 00000004
PAUSAR_                           00000351
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRODUTO_H                         00000035
PRODUTO_L                         00000036
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
QUOCIENTE_H                       00000029
QUOCIENTE_L                       0000002A
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RESTOTMP_H                        0000002E
RESTOTMP_L                        0000002D
RESTO_H                           00000032
RESTO_L                           00000031
ROTACIONAR                        000002D7
RP0                               00000005
RP1                               00000006
RS                                PORTE,0
RSEN                              00000001
RW                                PORTE,2
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SAI_INT                           00000007
SALVA_OPCAO                       000003A0
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
START                             000002CE
STATUS                            00000003
STATUS_TEMP                       00000021
SUBTRAI_16x16                     000000C2
SUJA                              00000283
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 39


SYMBOL TABLE
  LABEL                             VALUE 

T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T240                              .100
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
T6                                .3
TEMPO1                            00000022
TEMPO2                            00000023
TEMPO_DELAY                       0000007D
TESTA_DIVIDENDO                   000000AB
TESTA_ETAPA5                      0000038F
TESTA_MULT_1                      00000090
TESTA_MULT_2                      00000098
TESTE_LINHA0                      0000037E
TEST_TECLA                        000002DF
TIPO_ROUPA                        00000149
TIPO_SUJEIRA                      00000172
TMR0                              00000001
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISB                             00000086
TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 40


SYMBOL TABLE
  LABEL                             VALUE 

UA                                00000001
UNIDADE                           00000039
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_TEMP                            00000020
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
__DEBUG                           1


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
MPASM  5.35                          MAIN.ASM   2-26-2014  2:05:32         PAGE 41


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
03C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0400 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX X--------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:  1054
Program Memory Words Free:  7138


Errors   :     0
Warnings :    26 reported,     0 suppressed
Messages :    26 reported,     0 suppressed

